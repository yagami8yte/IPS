<UserControl x:Class="IPS.MainApp.Views.PasswordEntryView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:local="clr-namespace:IPS.MainApp.Views"
      xmlns:vm="clr-namespace:IPS.MainApp.ViewModels"
      xmlns:controls="clr-namespace:IPS.MainApp.Views.Controls"
      mc:Ignorable="d"
      d:DataContext="{d:DesignInstance vm:PasswordEntryViewModel}"
      d:DesignHeight="1920" d:DesignWidth="1080"
      Width="1080" Height="1920">

    <Grid>
        <!-- Coffee-themed gradient background -->
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                <GradientStop Color="#3E2723" Offset="0"/>
                <GradientStop Color="#6F4E37" Offset="0.5"/>
                <GradientStop Color="#4E342E" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <!-- Main Content -->
        <Border MaxWidth="800"
                Margin="100,0"
                VerticalAlignment="Center">
            <Border Background="#50000000"
                    CornerRadius="30"
                    Padding="80">
                <Border.Effect>
                    <DropShadowEffect Color="Black"
                                    Direction="270"
                                    ShadowDepth="10"
                                    Opacity="0.5"
                                    BlurRadius="30"/>
                </Border.Effect>

                <StackPanel>
                    <!-- Title -->
                    <TextBlock Text="Admin Access"
                               FontSize="64"
                               FontWeight="Bold"
                               FontFamily="{StaticResource DisplayFont}"
                               Foreground="{StaticResource LightCream}"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,60"/>

                    <!-- PIN Label -->
                    <TextBlock Text="Enter PIN"
                               FontSize="40"
                               FontFamily="{StaticResource BrandFont}"
                               Foreground="{StaticResource AccentLatte}"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,20"/>

                    <!-- PIN Display (dots) -->
                    <controls:PinDisplay x:Name="PinDisplayControl"
                                        PinLength="{Binding Password.Length}"
                                        MaxDigits="8"
                                        Height="80"
                                        Margin="0,0,0,30"/>

                    <!-- Numeric Keypad -->
                    <controls:NumericKeypad x:Name="NumericKeypadControl"
                                           Height="450"
                                           Margin="0,0,0,20"/>

                    <!-- Error Message -->
                    <TextBlock Text="{Binding ErrorMessage}"
                               FontSize="32"
                               FontFamily="{StaticResource BrandFont}"
                               Foreground="{StaticResource ErrorRed}"
                               HorizontalAlignment="Center"
                               TextWrapping="Wrap"
                               Margin="0,30,0,0"
                               Visibility="{Binding HasError, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                    <!-- Buttons -->
                    <Grid Margin="0,60,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Cancel Button -->
                        <Button Grid.Column="0"
                                Content="Cancel"
                                Command="{Binding CancelCommand}"
                                FontSize="44"
                                FontFamily="{StaticResource BrandFont}"
                                FontWeight="SemiBold"
                                Height="110"
                                Background="{StaticResource MediumBrown}"
                                Foreground="{StaticResource LightCream}"
                                BorderThickness="0"
                                Cursor="Hand">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="border"
                                            Background="{TemplateBinding Background}"
                                            CornerRadius="20">
                                        <ContentPresenter HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter TargetName="border" Property="Background" Value="{StaticResource DarkBrown}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <!-- Submit Button -->
                        <Button Grid.Column="2"
                                Content="Enter"
                                Command="{Binding SubmitCommand}"
                                FontSize="44"
                                FontFamily="{StaticResource BrandFont}"
                                FontWeight="SemiBold"
                                Height="110"
                                Background="{StaticResource AccentLatte}"
                                Foreground="{StaticResource DarkBrown}"
                                BorderThickness="0"
                                Cursor="Hand">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="border"
                                            Background="{TemplateBinding Background}"
                                            CornerRadius="20">
                                        <ContentPresenter HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter TargetName="border" Property="Background" Value="{StaticResource PrimaryBrown}"/>
                                            <Setter Property="Foreground" Value="{StaticResource LightCream}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </Grid>

                    <!-- Hint Text -->
                    <TextBlock Text="Default PIN: 0000"
                               FontSize="28"
                               FontFamily="{StaticResource BrandFont}"
                               Foreground="{StaticResource AccentGold}"
                               HorizontalAlignment="Center"
                               Margin="0,40,0,0"
                               Opacity="0.7"/>
                </StackPanel>
            </Border>
        </Border>
    </Grid>
</UserControl>
